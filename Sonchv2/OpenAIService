import Foundation
import Alamofire

class OpenAIService {
    let baseURL = "https://api.openai.com/v1/"

    func sendMessage(message: String) {
        let body = OpenAICompletionsBody(model: : "gpt-3.5-turbo", prompt: message, max_tokens: 150, temperature: 0.7)

        let headers: HTTPHeaders = [
            "Authorization": "Bearer \(Constants.openAIAPIKey)"
        ]

        AF.request(baseURL+ "chat/completions", method: .post, parameters: body, 
        encoder: .json, headers: headers ).response { data in print(data)}
    }
}

struct OpenAICompletionsBody: Encodable {
    let model: String
    let prompt: String
    let temperature: Float?
}